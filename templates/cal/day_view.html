{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/myStyle.css') }}">
{% endblock head %}

{% block body %}
<div class="day-container">
    <h2>Events for {{ date.strftime('%Y-%m-%d') }}</h2>

    <div class="events-list">
        {% if events %}
            {% for event in events %}
                <div class="event-item">
                    <span>{{ event.name }} ({{ event.start_time }} - {{ event.end_time }})</span>
                    {% if event.location %}
                        <p>Location: {{ event.location }}</p>
                    {% endif %}
                    {% if event.goal_id %}
                        <p>Linked to Goal: {{ event.goal.name }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <p>No events for this day.</p>
        {% endif %}
    </div>

    <div class="add-form-container">
        <h3>Add Event or Deadline</h3>
        <form method="POST">
            <label for="eventType">Type:</label>
            <select id="eventType" name="eventType" class="select-style">
                <option value="event">Event</option>
                <option value="deadline">Deadline</option>
            </select>

            <label for="event-name">Name:</label>
            <input type="text" id="event-name" name="event-name" placeholder="Event/Deadline Name" required>

            <label for="event-start">Start Time:</label>
            <input type="time" id="event-start" name="event-start" required>

            <label for="event-end">End Time:</label>
            <input type="time" id="event-end" name="event-end">

            <label for="event-location">Location (optional):</label>
            <input type="text" id="event-location" name="event-location" placeholder="Event Location">

            {% if goals %}
                <label for="goal-select">Link to Goal (for deadlines):</label>
                <select id="goal-select" name="goal-id" class="select-style">
                    <option value="">None</option>
                    {% for goal in goals %}
                        <option value="{{ goal.id }}">{{ goal.name }}</option>
                    {% endfor %}
                </select>
            {% endif %}

            <button id="addEventButton" class="button-style" style="background-color: green">Add</button>
        </form>
    </div>
</div>

<script>
    function onDateClick(element, date) {
        if (!element.classList.contains('other-month')) {
            window.location.href = '/pmg/day/' + date;
        }
    }
</script>
{% endblock body %}
